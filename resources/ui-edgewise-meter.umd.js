(function(){"use strict";try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode('.hotnipi-ewm-light[data-v-35e21a39]{--hotnipi-ewm-mix:20%;--hotnipi-ewm-shadow:rgba(var(--v-theme-on-group-background),var(--hotnipi-ewm-mix));--hotnipi-ewm-background:rgb(var(--v-theme-group-background));--hotnipi-ewm-outline:rgba(var(--v-theme-on-group-background),40%)}.hotnipi-ewm-dark[data-v-35e21a39]{--hotnipi-ewm-mix: 75%;--hotnipi-ewm-shadow: rgba(var(--v-theme-group-background), var(--hotnipi-ewm-mix));--hotnipi-ewm-background: rgb(var(--v-theme-on-group-background));--hotnipi-ewm-outline: rgba(var(--v-theme-group-background), 100%)}.hotnipi-ewm-wrapper[data-v-35e21a39]{display:grid;gap:1rem;align-items:center;height:100%}.hotnipi-ewm-label[data-v-35e21a39]{min-width:1rem;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.hotnipi-ewm-body[data-v-35e21a39]{position:relative;min-width:3rem;width:100%;height:100%;display:flex;align-content:center}.hotnipi-ewm-body.hotnipi-ewm-light[data-v-35e21a39]{filter:drop-shadow(0px 2px 4px var(--hotnipi-ewm-shadow))}.hotnipi-ewm-display[data-v-35e21a39]{width:100%;height:100%;display:flex;justify-content:center;position:relative;box-sizing:border-box;overflow:hidden;border:3px solid var(--hotnipi-ewm-shadow);background-color:var(--hotnipi-ewm-background);outline:1px solid var(--hotnipi-ewm-outline);outline-offset:-2px;border-radius:6px;box-shadow:inset 0 0 9px 1px var(--hotnipi-ewm-shadow)}.hotnipi-ewm-display[data-v-35e21a39]:after{content:"";position:absolute;top:0;right:0;bottom:0;left:0;background:linear-gradient(90deg,var(--hotnipi-ewm-shadow),transparent 30%,transparent 70%,var(--hotnipi-ewm-shadow))}.hotnipi-ewm-backplate[data-v-35e21a39]{width:calc(var(--hotnipi-ewm-size) * 1px);flex-shrink:0;position:relative}.hotnipi-ewm-numbers[data-v-35e21a39]{position:relative;display:flex;flex-direction:row;justify-content:space-between;height:100%;font-size:1.25rem;word-wrap:normal;align-content:center;transform:translate(-50%);transition:var(--hotnipi-ewm-easing)}.hotnipi-ewm-numbers[data-v-35e21a39] :nth-child(2n){font-size:var(--hotnipi-ewm-small-digits)}.hotnipi-ewm-numbers[data-v-35e21a39]:after{content:"";position:absolute;right:0%;width:100%;top:0;height:25%;background:var(--hotnipi-ewm-gradient,repeating-linear-gradient(to right, #00000040, #00000040 40%, transparent 40%, transparent));background-size:4px,100%}.hotnipi-ewm-numbers[data-v-35e21a39]:before{content:var(--hotnipi-ewm-logo,"Made in Estonia hotNipi ® Gauges");position:absolute;font-size:xx-small;text-align:end;top:0;right:0;bottom:0;left:0;width:20ch;translate:-120%;color:var(--hotnipi-ewm-outline)}.hotnipi-ewm-num[data-v-35e21a39]{position:relative;text-align:center;width:100%;color:#000;align-self:flex-end;border-bottom:3px solid transparent}.hotnipi-ewm-needle[data-v-35e21a39]{position:absolute;left:calc(50% - .5px);top:0;width:1px;height:100%;background-color:#eb1e1e;box-shadow:0 0 7px 2px var(--hotnipi-ewm-shadow)}.hotnipi-ewm-dark .hotnipi-ewm-needle[data-v-35e21a39]{box-shadow:0 0 12px 1px var(--hotnipi-ewm-shadow)}.hotnipi-ewm-size-error[data-v-35e21a39]{position:absolute;top:0;right:0;bottom:0;left:0;font-size:x-small;color:red;text-align:center;display:flex;justify-content:center}.hotnipi-ewm-size-error>p[data-v-35e21a39]{max-width:140px}@keyframes blink-35e21a39{50%{opacity:0}}.hotnipi-ewm-blink[data-v-35e21a39]{animation:blink-35e21a39 4s step-start 0s infinite}.hotnipi-ewm-blonk[data-v-35e21a39]{animation:blink-35e21a39 4s step-start 2s infinite}')),document.head.appendChild(e)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}})();
(function(a,l){typeof exports=="object"&&typeof module<"u"?l(exports,require("vuex"),require("vue")):typeof define=="function"&&define.amd?define(["exports","vuex","vue"],l):(a=typeof globalThis<"u"?globalThis:a||self,l(a["ui-edgewise-meter"]={},a.vuex,a.Vue))})(this,function(a,l,o){"use strict";const _=(t,e)=>{const n=t.__vccOpts||t;for(const[i,s]of e)n[i]=s;return n},g={name:"UIEdgewiseMeter",inject:["$socket"],props:{id:{type:String,required:!0},props:{type:Object,default:()=>({})},state:{type:Object,default:()=>({enabled:!1,visible:!1})}},setup(t){},data(){return{min:0,max:10,count:20,size:800,dark:!1,sectors:[{start:0,color:"lightblue"},{start:3,color:"transparent"},{start:7,color:"#ffc55c"},{start:9,color:"#fc5b5b"}],label:"T-out °C",smallDigits:!0,precision:1,animation:"ease",logo:"",value:0,sizeError:!1,timeout:null,styles:{},numbers:[0],class:""}},computed:{...l.mapState("data",["messages"])},methods:{applyProperties:function(){this.min=Number(this.props.min),this.max=Number(this.props.max),this.count=Number(this.props.count),this.size=Number(this.props.displaysize),this.sectors=this.props.sectors,this.precision=Number(this.props.precision),this.dark=this.props.dark,this.smallDigits=this.props.smallDigits,this.logo=this.props.logo,this.label=this.props.label,this.animation=this.props.animation,this.class=this.props.myclass},generateNumbers:function(){const t=(this.max*this.precision-this.min*this.precision)/this.count;let e=this.min*this.precision,n=[];for(let i=0;i<this.count+1;++i)n.push(e),e+=t;n=n.map(i=>i/this.precision),this.numbers=n},generateStyles:function(){this.styles={"--hotnipi-ewm-logo":this.logo?JSON.stringify(this.logo):void 0,"--hotnipi-ewm-size":this.size,"--hotnipi-ewm-small-digits":this.smallDigits?"small":"inherit","--hotnipi-ewm-gradient":this.sectorGradient(),"--hotnipi-ewm-easing":this.animation=="none"?"unset":this.animation=="ease"?"left 1s ease-in-out":"left 1s cubic-bezier( 0.6, 0.06, 0.132, 1.15 )","grid-template-columns":this.label?"auto 1fr":"1fr"}},sectorGradient:function(){let t="repeating-linear-gradient(to right, #00000040, #00000040 40%, transparent 40%, transparent)";if(this.sectors.length==0)return t;t=t.concat(", linear-gradient(to right,");let e,n=this.sectors.length-1;return this.sectors.forEach((i,s)=>{s==0?i.start==this.min?(t=t.concat(i.color,", "),s+1<=n&&(e=this.position(this.sectors[s+1].start).toString(),t=t.concat(i.color," ",e,"%, "))):(t=t.concat("transparent, transparent "),e=this.position(i.start).toString(),t=t.concat(e,"%, "),s+1<=n&&(e=this.position(i.start).toString(),t=t.concat(i.color," ",e,"%, "),e=this.position(this.sectors[s+1].start).toString(),t=t.concat(i.color," ",e,"%, "))):s==n?(e=this.position(i.start).toString(),t=t.concat(i.color," ",e,"%, "),t=t.concat(i.color)):(e=this.position(i.start).toString(),t=t.concat(i.color," ",e,"%, "),s+1<=n&&(e=this.position(this.sectors[s+1].start).toString(),t=t.concat(i.color," ",e,"%, ")))}),t=t.concat(")"),t},range:function(t,e,n,i){if(n=="clamp"&&(t<e.minin&&(t=e.minin),t>e.maxin&&(t=e.maxin)),n=="roll"){let r=e.maxin-e.minin;t=((t-e.minin)%r+r)%r+e.minin}let s=(t-e.minin)/(e.maxin-e.minin)*(e.maxout-e.minout)+e.minout;return i&&(s=Math.round(s)),s},position:function(t){const e=t??this.value,i=this.size/(this.count+1)/2*100/this.size;let s=(e-this.min)/(this.max-this.min)*100;s=t?s:100-s;const r={minin:0,maxin:100,minout:i,maxout:100-i};return this.range(s,r)},validate:function(t){let e;if(typeof t!="number"){if(e=parseFloat(t),isNaN(e))return null}else e=t;return e},move:function(){const t=this.$refs.plate;!this.$refs.display||!t||(t.style.left=this.position()+"%")},onPayload:function(t){var n,i,s,r,c,p,h,u,d,m,f,y;if((t==null?void 0:t.payload)!=null){const b=this.validate(t.payload);b!==null&&(this.value=b,this.move())}let e=!1;(n=t.ui_update)!=null&&n.label&&typeof t.ui_update.label=="string"&&(this.label=t.ui_update.label),(i=t.ui_update)!=null&&i.min&&typeof((s=t.ui_update)==null?void 0:s.min)=="number"&&(this.min=t.ui_update.min,e=!0),(r=t.ui_update)!=null&&r.max&&typeof((c=t.ui_update)==null?void 0:c.max)=="number"&&(this.max=t.ui_update.max,e=!0),(p=t.ui_update)!=null&&p.precision&&typeof((h=t.ui_update)==null?void 0:h.precision)=="number"&&(this.precision=t.ui_update.precision,e=!0),(u=t.ui_update)!=null&&u.count&&typeof((d=t.ui_update)==null?void 0:d.count)=="number"&&(this.count=t.ui_update.count,e=!0),(m=t.ui_update)!=null&&m.displaysize&&typeof((f=t.ui_update)==null?void 0:f.displaysize)=="number"&&(this.size=t.ui_update.displaysize,e=!0),e&&this.generateNumbers(),Array.isArray((y=t.ui_update)==null?void 0:y.sectors)&&(this.sectors=t.ui_update.sectors,this.generateStyles())},checkSize:function(){this.timeout=setTimeout(()=>{const t=this.$refs.plate,e=this.$refs.needle;if(!t||!e){this.timeout=null;return}let n=0;Array.from(t.children).forEach(i=>{n+=parseFloat(getComputedStyle(i).getPropertyValue("width"))}),n-this.size>.2&&(this.sizeError=!0,t.classList.add("hotnipi-ewm-blink"),e.classList.add("hotnipi-ewm-blink")),this.timeout=null},100)}},mounted(){this.$socket.on("widget-load:"+this.id,t=>{this.onPayload(t)}),this.$socket.on("msg-input:"+this.id,t=>{this.onPayload(t),this.$store.commit("data/bind",{widgetId:this.id,msg:t})}),this.applyProperties(),this.generateNumbers(),this.generateStyles(),this.move(),this.$socket.emit("widget-load",this.id),this.checkSize()},unmounted(){var t,e;this.timeout&&(clearTimeout(this.timeout),this.timeout=null),(t=this.$socket)==null||t.off("widget-load:"+this.id),(e=this.$socket)==null||e.off("msg-input:"+this.id)}},k={key:0,class:"hotnipi-ewm-label"},w={ref:"display",class:"hotnipi-ewm-display"},x={class:"hotnipi-ewm-backplate"},z={ref:"plate",class:"hotnipi-ewm-numbers"},S={key:0,class:"hotnipi-ewm-size-error hotnipi-ewm-blonk"},E={ref:"needle",class:"hotnipi-ewm-needle"};function N(t,e,n,i,s,r){return o.openBlock(),o.createElementBlock("div",{class:o.normalizeClass(["hotnipi-ewm-wrapper",s.class]),style:o.normalizeStyle(s.styles)},[s.label?(o.openBlock(),o.createElementBlock("div",k,o.toDisplayString(s.label),1)):o.createCommentVNode("",!0),o.createElementVNode("div",{class:o.normalizeClass(["hotnipi-ewm-body",{"hotnipi-ewm-dark":s.dark,"hotnipi-ewm-light":!s.dark}])},[o.createElementVNode("div",w,[o.createElementVNode("div",x,[o.createElementVNode("div",z,[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(s.numbers,(c,p)=>(o.openBlock(),o.createElementBlock("div",{key:p,class:"hotnipi-ewm-num"},o.toDisplayString(c),1))),128))],512),s.sizeError?(o.openBlock(),o.createElementBlock("div",S,e[0]||(e[0]=[o.createElementVNode("p",null,"The configured size is too small. The digits cannot be placed in exact locations.",-1)]))):o.createCommentVNode("",!0)]),o.createElementVNode("div",E,null,512)],512)],2)],6)}const B=_(g,[["render",N],["__scopeId","data-v-35e21a39"]]);a.UIEdgewiseMeter=B,Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})});
